---
import { getCollection } from 'astro:content';

const allSkills = await getCollection('skills');
const skillCategories = allSkills
    .sort((a, b) => a.data.order - b.data.order)
    .map(c => c.data);
---

<section id="skills" class="py-20 md:py-24 relative bg-transparent transition-colors duration-500 overflow-hidden">
  <!-- Dynamic Background Ambient -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-1/4 -right-20 w-96 h-96 bg-portfolio-royal-blue/5 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-1/4 -left-20 w-[30rem] h-[30rem] bg-portfolio-navy/5 rounded-full blur-3xl animate-pulse-slower"></div>
  </div>

    <!-- Luxurious Top Border -->
  <div
    class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-portfolio-navy to-transparent"
  >
  </div>
  <div
    class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-portfolio-navy via-portfolio-royal-blue to-portfolio-navy blur-sm"
  >
  </div>

  <div class="max-w-5xl mx-auto px-6 relative z-10">
    <div class="flex items-center justify-center mb-6 animate-on-scroll">
      <div class="h-px w-16 bg-gradient-to-r from-transparent to-portfolio-royal-blue/50"></div>
      <div class="mx-4 px-6 py-1 rounded-full border border-portfolio-royal-blue/20 bg-gradient-to-r from-portfolio-royal-blue/5 to-portfolio-navy/5">
        <span class="text-xs font-medium tracking-widest uppercase text-portfolio-royal-blue">Expertise</span>
      </div>
      <div class="h-px w-16 bg-gradient-to-l from-transparent to-portfolio-navy/50"></div>
    </div>

    <h2 class="text-4xl md:text-5xl font-bold text-black dark:text-white mb-16 text-center animate-on-scroll tracking-tight">
      Skills & Technologies
    </h2>

    <div class="space-y-16">
      {skillCategories.map((category, catIndex) => (
        <div class="animate-on-scroll" style={`animation-delay: ${catIndex * 150}ms`}>
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-8 text-center tracking-tight flex items-center justify-center gap-4">
            <span class="h-px w-8 bg-black/10 dark:bg-white/10"></span>
            {category.title}
            <span class="h-px w-8 bg-black/10 dark:bg-white/10"></span>
          </h3>
          
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5">
            {category.items.map((item, skillIndex) => (
              <div
                class="group/skill relative p-5 rounded-3xl bg-white dark:bg-white/[0.02] border border-gray-200 dark:border-white/5 hover:border-portfolio-royal-blue/30 dark:hover:border-portfolio-royal-blue/30 hover:bg-gray-50 dark:hover:bg-white/[0.05] transition-all duration-500 shadow-md shadow-gray-100 hover:shadow-xl hover:-translate-y-2 flex flex-col items-center justify-center gap-4"
              >
                <!-- Icon Container -->
                <div class="w-10 h-10 md:w-12 md:h-12 flex items-center justify-center transition-transform duration-500 group-hover/skill:scale-110">
                  <img 
                    src={`https://cdn.simpleicons.org/${item.icon || 'codeforces'}`} 
                    alt={item.name}
                    class="w-full h-full object-contain dark:invert-[0.1] group-hover/skill:brightness-125 transition-all"
                    onerror="this.src='https://cdn.simpleicons.org/codeforces';this.style.opacity='0.5';"
                  />
                </div>
                
                <!-- Skill Name -->
                <span class="text-xs md:text-sm font-bold text-gray-600 dark:text-gray-400 group-hover/skill:text-portfolio-royal-blue transition-colors text-center">
                  {item.name.includes(' ') ? item.name.split(' ')[0] : item.name}
                </span>

                <!-- Subtle Background Hover Effect -->
                <div class="absolute inset-0 bg-gradient-to-br from-portfolio-royal-blue/5 to-transparent opacity-0 group-hover/skill:opacity-100 transition-opacity rounded-3xl"></div>
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>


<style>


  @keyframes pulse-slow {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.05); }
  }
  .animate-pulse-slow {
    animation: pulse-slow 8s infinite ease-in-out;
  }
  
  @keyframes pulse-slower {
    0%, 100% { opacity: 0.2; transform: scale(1.02); }
    50% { opacity: 0.4; transform: scale(0.98); }
  }
  .animate-pulse-slower {
    animation: pulse-slower 12s infinite ease-in-out;
  }
</style>


